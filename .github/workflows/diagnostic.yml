name: Diagnostic Check

on:
  push:
    branches: ["1.0.14+1"]
  workflow_dispatch:

jobs:
  diagnostic:
    runs-on: windows-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Check GitHub Context
        run: |
          echo "GitHub Event: ${{ github.event_name }}"
          echo "Branch: ${{ github.ref_name }}"
          echo "SHA: ${{ github.sha }}"
          echo "Actor: ${{ github.actor }}"
          echo "Repository: ${{ github.repository }}"
          echo "Workflow: ${{ github.workflow }}"
          echo "Run ID: ${{ github.run_id }}"

      - name: Check Secrets
        run: |
          if [ -n "${{ secrets.SHOREBIRD_TOKEN }}" ]; then
            echo "‚úÖ SHOREBIRD_TOKEN est√° configurado"
          else
            echo "‚ùå SHOREBIRD_TOKEN n√£o est√° configurado"
          fi

          if [ -n "${{ secrets.GITHUB_TOKEN }}" ]; then
            echo "‚úÖ GITHUB_TOKEN est√° configurado"
          else
            echo "‚ùå GITHUB_TOKEN n√£o est√° configurado"
          fi

      - name: Check Workflow Files
        run: |
          echo "üìÅ Workflow files:"
          ls -la .github/workflows/

          echo "üìÑ Content of simple-test.yml:"
          cat .github/workflows/simple-test.yml

      - name: Check Git Status
        run: |
          echo "üîç Git status:"
          git status
          echo "üìù Last commits:"
          git log --oneline -5
